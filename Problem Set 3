//Problem Set 3: Palindrome and Anagram Checker
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#define MAX_SIZE 200
// Function Prototypes
void cleanString(char *source, char *dest);
void sortString(char *str);
int checkPalindrome(char *str);
int checkAnagram(char *str1, char *str2);
void flushInputBuffer();
int main() {
 int choice;
 char input1[MAX_SIZE];
 char input2[MAX_SIZE];
 do {
 // Menu Display
 printf("\n===== Palindrome & Anagram Tool =====\n");
 printf("1. Palindrome Checker\n");
 printf("2. Anagram Checker\n");
 printf("3. Exit\n");
 printf("Choose an option: ");

 if (scanf("%d", &choice) != 1) {
 // Handle non-integer inputs to prevent infinite loops
 printf("Invalid input. Please enter a number.\n");
 flushInputBuffer();
 continue;
 }
 flushInputBuffer(); // Consume the newline character left by scanf
 switch (choice) {
 case 1:
 printf("Enter word/phrase: ");
 fgets(input1, MAX_SIZE, stdin);

 // Remove trailing newline from fgets if present
 input1[strcspn(input1, "\n")] = 0;
 if (checkPalindrome(input1)) {
 printf("Output: Palindrome\n");
 } else {
 printf("Output: Not Palindrome\n");
 }
 break;
 case 2:
 printf("Enter first word/phrase: ");
 fgets(input1, MAX_SIZE, stdin);
 input1[strcspn(input1, "\n")] = 0;
 printf("Enter second word/phrase: ");
 fgets(input2, MAX_SIZE, stdin);
 input2[strcspn(input2, "\n")] = 0;
 if (checkAnagram(input1, input2)) {
 printf("Output: Anagrams\n");
 } else {
 printf("Output: Not Anagrams\n");
 }
 break;
 case 3:
 printf("Exiting program...\n");
 break;
 default:
 printf("Invalid option. Please try again.\n");
 }
 } while (choice != 3);
 return 0;
}
// --- Helper Functions ---
/* * Removes spaces, punctuation, and converts to lowercase.
* Input: "Never odd or even" -> Output: "neveroddoreven"
*/
void cleanString(char *source, char *dest) {
 int j = 0;
 for (int i = 0; source[i] != '\0'; i++) {
 // isalnum checks if character is a letter or number
 if (isalnum(source[i])) {
 dest[j++] = tolower(source[i]);
 }
 }
 dest[j] = '\0'; // Null-terminate the new string
}
/* * Sorts a string alphabetically using Bubble Sort.
* Necessary for the Anagram logic.
*/
void sortString(char *str) {
 int n = strlen(str);
 char temp;
 for (int i = 0; i < n - 1; i++) {
 for (int j = 0; j < n - i - 1; j++) {
 if (str[j] > str[j + 1]) {
 temp = str[j];
 str[j] = str[j + 1];
 str[j + 1] = temp;
 }
 }
 }
}
/* * Checks if a string reads the same forwards and backwards.
* Returns 1 (true) or 0 (false).
*/
int checkPalindrome(char *str) {
 char clean[MAX_SIZE];
 cleanString(str, clean); // Pre-process the string
 int start = 0;
 int end = strlen(clean) - 1;
 while (start < end) {
 if (clean[start] != clean[end]) {
 return 0; // Not a palindrome
 }
 start++;
 end--;
 }
 return 1; // Is a palindrome
}
/* * Checks if two strings contain the exact same characters.
* Returns 1 (true) or 0 (false).
*/
int checkAnagram(char *str1, char *str2) {
 char clean1[MAX_SIZE];
 char clean2[MAX_SIZE];
 // 1. Clean both strings (remove spaces, symbols, lowercase)
 cleanString(str1, clean1);
 cleanString(str2, clean2);
 // 2. If lengths differ, they cannot be anagrams
 if (strlen(clean1) != strlen(clean2)) {
 return 0;
 }
 // 3. Sort both strings
 sortString(clean1);
 sortString(clean2);
 // 4. Compare sorted strings
 if (strcmp(clean1, clean2) == 0) {
 return 1;
 } else {
 return 0;
 }
}
/* * Clears the input buffer to prevent skipping fgets inputs
*/
void flushInputBuffer() {
 int c;
 while ((c = getchar()) != '\n' && c != EOF);
}
